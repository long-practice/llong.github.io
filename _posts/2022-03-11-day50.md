---
title: 프로그래머스 인공지능 데브코스 50일차
layout: post
post-image: https://user-images.githubusercontent.com/83870423/148743292-e6a1b86d-95ca-4f30-b96a-482104d72319.png
description: 11주차(22.2.21.(월) ~ 22.2.25.(금)) 
  SQL 소개 및 문법
  SQL을 이용한 데이터분석 실습
  데이터 웨어하우스 Redshift
tags:
- SQL
- 관계형 데이터베이스
- 데이터 엔지니어
- 데이터 분석가
- 데이터 과학자
- DDL
- DML
- DCL
- 데이터 웨어하우스
- 프로덕션 데이터베이스
- 데이터 스키마
- 데이터 인프라
- Redshift

use_math: True
---
# 50일차(ML_basics - Redshift 소개)

11주차(22.2.21.(월) ~ 22.2.25.(금)): SQL과 데이터분석
* Redshift를 통한 SQL(DDL, DML) 실습
* 고급 문법 소개, 실습
* monthly project
* Docker 세팅
<br>
<br>

출처: 프로그래머스 인공지능 데브코스 3기 강의

### SQL(Structured Query Language)
- 관계형 데이터베이스를 조작하는 프로그래밍 언어, 데이터 요약과 데이터 분석을 위한 언어
- 1970년대 초반 IBM이 개발한 구조화된 데이터 질의 언어
- 데이터 관련 3개 직군(데이터 엔지니어, 데이터 분석가, 데이터 과학자)들이 모두 공통적으로 알아야하는 언어
- 테이블 구조 정의를 위한 DDL, 데이터 조작(레코드를 추가/삭제/갱신) 및 질의(원하는 레코드들을 읽어옴)를 위한 DML로 나누어짐<br>
<br>
- 빅데이터에서도 굉장히 중요하게 사용, 구조화된 데이터를 다루는한 SQL은 데이터 규모와 상관없이 쓰임
- 모든 대용량 데이터 웨어하우스는 SQL 기반(Spark, Hadoop도 동일)<br>
<br>
- 구조화된 데이터를 다루는데 최적화<br>
  - 정규표현식을 통해 비구조화된 데이터를 다루는 것이 가능하나 제약이 심함
  - 많은 관계형 데이터베이스들이 플랫한 구조만 지원(필드안에 필드가 있는(nested) JSON과 같은 형식은 지원하지 않음, 구글 빅쿼리는 지원)
  - **비구조화된 데이터를 다루는데 Spark, Hadoop과 같은 분산 컴퓨팅 환경이 필요**, 다시 말해서 비구조화 데이터를 처리하지 못함<br>
  
---

### 관계형 데이터베이스
- 구조화된 데이터를 저장하고, 질의할 수있도록 해주는 저장공간
- 빅데이터의 등장과 함께 SQL의 몰락을 예측했지만 실제로는 그렇지 않음
- 구조화된 데이터를 추출하고 분석하는데 확실한 성능을 보장하기 때문<br>
<br>

#### 대표적인 관계형 데이터베이스
- **프로덕션 데이터베이스: MySQL, PostgreSQL, Oracle, ...**<br>
  - OLTP(OnLine Transaction Processing)
  - 빠른 응답속도를 가지고 서비스에 필요한 정보가 저장
  - 웹과 모바일 애플리케이션에 연동이되어 사용됨
  - 백엔드, 프론트엔드 개발자들이 주로 사용<br>
  <br>
  - 데이터를 논리적 단위로 나눠 저장하고 필요시 조인하는 스타 스키마 사용
  - 스토리지의 낭비가 덜하고 업데이트가 쉬움<br>
<br>

- **데이터 웨어하우스: RedShift, Snowflake, BigQuery, Hive, Spark, ...**<br>
  - OLAP(OnLine Analytical Processing)
  - 처리 속도보다는 처리 데이터 크기에 집중, 데이터 분석 혹은 모델 빌딩 등을 위한 데이터 저장
  - 주로 프로덕션 데이터베이스를 복사해서 데이터 웨어하우스에 저장
  - 프로덕션 데이터베이스와는 독립적으로 존재해서 서비스 제공하는 것과는 관계가 없음
  - 데이터 엔지니어들이 주로 사용<br>
  <br>
  - 별도의 조인이 필요 없는 형태인 비정규화 스키마를 사용하여 데이터를 저장
  - 스토리지를 더 사용하지만 조인이 필요 없기 때문에 빠른 계산이 가능
  
#### 관계형 데이터베이스의 구조
- 테이블과 데이터베이스 2단계로 구성
- 테이블은 행과 열로 구성되어 데이터가 저장되어 있는 표 형식을 나타냄(엑셀에서는 시트에 해당)
- 데이터베이스는 스키마라고도 부르며 테이블들을 폴더 밑으로 구성(엑셀에서는 파일에 해당)<br>
<br>

#### 테이블의 구조(테이블 스키마)
- 테이블은 레코드(데이터 객체 하나하나)들로 구성(행)
- 레코드는 하나 이상의 필드(칼럼)로 구성(열)
- 필드(칼럼)는 이름과 타입(int, varchar), 속성(Primary Key)으로 구성<br>
<br>

---

### 데이터 웨어하우스(Data Warehouse)
- SQL기반 관계형 데이터베이스로 프로덕션 데이터베이스와는 별도로 관리되어지고, 회사에 필요한 모든 데이터를 저장
- 즉, 외부 고객이 아닌 내부 직원을 위한 데이터베이스
- 데이터 웨어하우스 외부에 존재하는 데이터를 읽어서 데이터 웨어하우스로 저장해주는 프로세스(ETL(Extract, Transform, Load) 혹은 데이터 파이프라인) 필요

### 데이터 인프라
- 외부 데이터를 ETL하고, 데이터 웨어하우스를 구축하여 관리하는 시스템
- 데이터 순환 구조<br>
  **사이트 방문 트래픽, 외부 데이터 > 데이터 팀에 의한 데이터 가공 > 데이터 시각화 및 분석 > 제품 서비스 개선 > 반복**

---

### 여러가지 중요 서비스

#### 데이터베이스
- RDS: MySQL, PostgreSQL, Aurora, Oracle, MS SQL Server
- DynamoDB
- Redshift
- ElasticCache
- Neptune(Graph database)
- ElasticSearch
- MongoDB<br>
<br>

#### AI & ML 서비스
- SageMaker: 딥러닝, 머신러닝 E2E 프레임 워크
- Lex: 대화형 인터페이스(챗봇 서비스)
- Polly: 텍스트를 음성으로 바꿔주는 엔진
- Rekognition: 이미지 인식 서비스

### Redshift
- 확장 가능한 SQL 엔진으로 2PB까지 지원
- OLAP으로 응답속도가 빠르지 않기 때문에 프로덕션 데이터베이스로 사용불가(**데이터 웨어하우스**)<br>
<br>
- 칼럼별 압축이 가능하며, 칼럼의 추가/삭제가 아주 빠름
- `COPY`커맨드를 이용한 벌크 업데이트(대량 데이터 업데이트) 지원
- **고정 용량, 비용**의 SQL 엔진이기 때문에 예산관리가 쉬운 장점이 있으나<br>
  유휴자원에 대한 낭비가 발생할 수 있으며, 현재 용량을 넘어가도록 사용하게되면 속도가 느림<br>
  이를 해결하기 위해 가변 용량 SQL 엔진(Snowflake, BigQuery)을 사용
- 다른 데이터 웨어하우스처럼 **후보키의 유일성을 보장하지는 않음**<br>
<br>
- PostgreSQL 8.x와 SQL이 호환되지만 모든 기능을 지원하지 않음(Redshift에서는 text 타입이 존재하지 않음)
- PostgreSQL 8.x와 호환되는 모든 툴과 프로그래밍 언어를 통해 접근 가능<br>
  - SQL Workbench(Mac, Window), Postico(Mac)
  - Python이라면 psycopg2 모듈
  - 시각화/대시보드 툴에서는 Looker, Tableau, Power BI Superset 등에서 연결가능
- **SQL이 메인 언어**<br>
<br>

---

### 느낀점
대부분 알고있는 내용이었으나 실제로 서비스 되고 어떻게 데이터베이스가 실제 사용되고있는지 그 실체는 본적이 없었다.<br>
이번 과정을 통해서 직접 데이터베이스를 실제 기업에서 활용하고 있는 툴에서 구축해보고<br>
실습해보면서 관련된 지식을 잘 익혀나감과 동시에 데이터 직군으로서의 업무에 대해 잘 알아볼 수 있는 시간으로 만들고 싶다
